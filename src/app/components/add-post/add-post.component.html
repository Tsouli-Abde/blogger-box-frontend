<div class="container mt-5">
  <h2>Add New Post</h2>
  <form [formGroup]="postForm" (ngSubmit)="onSubmit()">

    <div class="mb-3">
      <label for="title" class="form-label">Title:</label>
      <input type="text"
             id="title"
             class="form-control"
             [ngClass]="{'is-invalid': title?.invalid && (title?.dirty || title?.touched)}"
             formControlName="title">
      <div *ngIf="title?.invalid && (title?.dirty || title?.touched)" class="invalid-feedback">
        <div *ngIf="title?.errors?.['required']">Title is required.</div>
        <div *ngIf="title?.errors?.['minlength']">Title must be at least 5 characters.</div>
        <div *ngIf="title?.errors?.['maxlength']">Title must be less than 150 characters.</div>
      </div>
    </div>

    <div class="mb-3">
      <label for="category" class="form-label">Category:</label>
      <select id="category"
              class="form-select"
              [ngClass]="{'is-invalid': category?.invalid && (category?.dirty || category?.touched)}"
              formControlName="categoryId">
        <option value="">Select a category</option>
        <option *ngFor="let cat of categories" [value]="cat.id">{{ cat.name }}</option>
      </select>
      <div *ngIf="category?.invalid && (category?.dirty || category?.touched)" class="invalid-feedback">
        Category is required.
      </div>
    </div>

    <div class="mb-3">
      <label for="content" class="form-label">Content:</label>
      <textarea id="content"
                rows="5"
                class="form-control"
                [ngClass]="{'is-invalid': content?.invalid && (content?.dirty || content?.touched)}"
                formControlName="content"></textarea>
      <div *ngIf="content?.invalid && (content?.dirty || content?.touched)" class="invalid-feedback">
        <div *ngIf="content?.errors?.['required']">Content is required.</div>
        <div *ngIf="content?.errors?.['maxlength']">Content must be less than 2500 characters.</div>
      </div>
    </div>

    <div class="d-flex justify-content-end">
      <button type="button" class="btn btn-outline-danger me-2" (click)="onCancel()">Close</button>
      <button type="submit" class="btn btn-success">Post message</button>
    </div>

  </form>
</div>
